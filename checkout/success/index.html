<script>
(async () => {
  const sid = new URLSearchParams(location.search).get('session_id');
  document.getElementById('sid').textContent = sid || 'â€“';
  if (!sid) return;

  try {
    const res = await fetch('/.netlify/functions/getCheckoutSession?id=' + encodeURIComponent(sid));
    if (!res.ok) return;
    const data = await res.json();
    // Example: personalize the headline if we have a name
    if (data.name) {
      document.querySelector('h1').textContent = `You're all set, ${data.name} ðŸŽ‰`;
    }
  } catch {}
})();
</script>

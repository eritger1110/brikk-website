<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <title>Interactive Sandbox - Brikk</title>
    <meta name="description" content="Try Brikk's AI-to-AI commerce platform with interactive templates for healthcare, finance, supply chain, and more." />
    
    <link rel="stylesheet" href="./assets/brand-system.css" />
    <style>
      .sandbox-container {
        display: grid;
        grid-template-columns: 300px 1fr 350px;
        height: calc(100vh - var(--header-desktop));
        gap: 0;
      }
      
      .template-picker {
        background: var(--surface);
        border-right: 1px solid var(--border);
        padding: 1.5rem;
        overflow-y: auto;
      }
      
      .sandbox-main {
        background: var(--bg);
        padding: 2rem;
        overflow-y: auto;
      }
      
      .side-panel {
        background: var(--surface);
        border-left: 1px solid var(--border);
        padding: 1.5rem;
        overflow-y: auto;
      }
      
      .template-item {
        padding: 1rem;
        margin-bottom: 0.75rem;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
        border: 1px solid var(--border);
      }
      
      .template-item:hover {
        background: var(--bg);
        border-color: var(--accent-teal);
      }
      
      .template-item.active {
        background: var(--bg);
        border-color: var(--accent-teal);
      }
      
      .console-output {
        background: #000;
        color: #00ff00;
        font-family: 'Courier New', monospace;
        padding: 1rem;
        border-radius: 8px;
        height: 300px;
        overflow-y: auto;
        margin-bottom: 1rem;
        font-size: 0.875rem;
        line-height: 1.4;
      }
      
      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
        margin-bottom: 2rem;
      }
      
      .metric-card {
        background: var(--surface);
        padding: 1rem;
        border-radius: 8px;
        text-align: center;
      }
      
      .metric-value {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--accent-teal);
      }
      
      .code-block {
        background: var(--surface);
        padding: 1rem;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        font-size: 0.875rem;
        margin-bottom: 1rem;
        overflow-x: auto;
      }
      
      @media (max-width: 1024px) {
        .sandbox-container {
          grid-template-columns: 1fr;
          grid-template-rows: auto 1fr auto;
          height: auto;
        }
        
        .template-picker, .side-panel {
          border: none;
          border-bottom: 1px solid var(--border);
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="flex items-center">
          <a href="./index.html" class="flex items-center">
            <img src="./brand/brikklogo.png2" alt="Brikk" class="brikk-logo" />
          </a>
        </div>
        
        <nav class="nav-links">
          <a href="./index.html">Home</a>
          <a href="./features.html">Features</a>
          <a href="./use-cases.html">Use Cases</a>
          <a href="./pricing.html">Pricing</a>
          <a href="./security.html">Security</a>
        </nav>
        
        <div class="flex items-center">
          <a href="./signup.html" class="btn-primary">
            Start Free
          </a>
        </div>
      </div>
    </header>

    <!-- Sandbox Container -->
    <div class="sandbox-container" style="margin-top: var(--header-desktop);">
      <!-- Template Picker -->
      <div class="template-picker">
        <h3 style="color: var(--text-primary); margin-bottom: 1rem;">Choose Template</h3>
        
        <div class="template-item active" onclick="loadTemplate('healthcare')">
          <div style="color: var(--accent-teal); font-weight: 600; margin-bottom: 0.25rem;">Healthcare</div>
          <div style="color: var(--text-secondary); font-size: 0.875rem;">Patient care coordination</div>
        </div>
        
        <div class="template-item" onclick="loadTemplate('finance')">
          <div style="color: var(--accent-teal); font-weight: 600; margin-bottom: 0.25rem;">Finance</div>
          <div style="color: var(--text-secondary); font-size: 0.875rem;">Trading workflows</div>
        </div>
        
        <div class="template-item" onclick="loadTemplate('supply-chain')">
          <div style="color: var(--accent-teal); font-weight: 600; margin-bottom: 0.25rem;">Supply Chain</div>
          <div style="color: var(--text-secondary); font-size: 0.875rem;">Procurement automation</div>
        </div>
        
        <div class="template-item" onclick="loadTemplate('customer-ops')">
          <div style="color: var(--accent-teal); font-weight: 600; margin-bottom: 0.25rem;">Customer Ops</div>
          <div style="color: var(--text-secondary); font-size: 0.875rem;">Service tickets</div>
        </div>
        
        <div class="template-item" onclick="loadTemplate('energy')">
          <div style="color: var(--accent-teal); font-weight: 600; margin-bottom: 0.25rem;">Energy</div>
          <div style="color: var(--text-secondary); font-size: 0.875rem;">Smart grid management</div>
        </div>
        
        <div class="template-item" onclick="loadTemplate('devops')">
          <div style="color: var(--accent-teal); font-weight: 600; margin-bottom: 0.25rem;">DevOps</div>
          <div style="color: var(--text-secondary); font-size: 0.875rem;">Platform automation</div>
        </div>
      </div>

      <!-- Main Sandbox Area -->
      <div class="sandbox-main">
        <div class="flex justify-between items-center mb-4">
          <h2 id="scenario-title" style="color: var(--text-primary);">Healthcare: Patient Care Coordination</h2>
          <button onclick="runScenario()" class="btn-primary">
            Run Scenario
          </button>
        </div>
        
        <!-- Metrics -->
        <div class="metrics-grid">
          <div class="metric-card">
            <div class="metric-value" id="agents-count">3</div>
            <div style="color: var(--text-secondary); font-size: 0.875rem;">Active Agents</div>
          </div>
          <div class="metric-card">
            <div class="metric-value" id="messages-count">0</div>
            <div style="color: var(--text-secondary); font-size: 0.875rem;">Messages Sent</div>
          </div>
          <div class="metric-card">
            <div class="metric-value" id="contracts-count">0</div>
            <div style="color: var(--text-secondary); font-size: 0.875rem;">Contracts Created</div>
          </div>
          <div class="metric-card">
            <div class="metric-value" id="payments-count">$0</div>
            <div style="color: var(--text-secondary); font-size: 0.875rem;">Payments Processed</div>
          </div>
        </div>
        
        <!-- Console Output -->
        <div>
          <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Live Console</h3>
          <div class="console-output" id="console">
            <div>Brikk Sandbox v1.2.0 - Ready</div>
            <div>Loading healthcare template...</div>
            <div>✓ Clinic Agent initialized</div>
            <div>✓ Insurance Agent initialized</div>
            <div>✓ Pharmacy Agent initialized</div>
            <div>Ready to run scenario. Click 'Run Scenario' to begin.</div>
          </div>
        </div>
        
        <!-- Code Example -->
        <div>
          <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Sample Code</h3>
          <div class="code-block" id="code-example">
            <div style="color: var(--accent-teal);"># Healthcare: Prior Authorization Request</div>
            <div style="color: var(--text-secondary);">from brikk import Agent, Contract</div>
            <div></div>
            <div>clinic = Agent("clinic_system")</div>
            <div>insurance = Agent("insurance_provider")</div>
            <div></div>
            <div style="color: var(--accent-teal);"># Send structured prior-auth request</div>
            <div>auth_request = clinic.send_message(</div>
            <div>&nbsp;&nbsp;to=insurance,</div>
            <div>&nbsp;&nbsp;type="prior_authorization",</div>
            <div>&nbsp;&nbsp;data={"procedure": "MRI", "patient_id": "12345"}</div>
            <div>)</div>
          </div>
        </div>
      </div>

      <!-- Side Panel -->
      <div class="side-panel">
        <h3 style="color: var(--text-primary); margin-bottom: 1rem;">Scenario Details</h3>
        
        <div id="scenario-details">
          <div style="margin-bottom: 1.5rem;">
            <h4 style="color: var(--accent-teal); margin-bottom: 0.5rem;">Problem</h4>
            <p style="color: var(--text-secondary); font-size: 0.875rem;">
              Prior authorization requests often get lost between clinic and insurance systems, causing treatment delays.
            </p>
          </div>
          
          <div style="margin-bottom: 1.5rem;">
            <h4 style="color: var(--accent-teal); margin-bottom: 0.5rem;">Solution</h4>
            <p style="color: var(--text-secondary); font-size: 0.875rem;">
              Agents coordinate the entire workflow with delivery guarantees and structured status updates.
            </p>
          </div>
          
          <div style="margin-bottom: 1.5rem;">
            <h4 style="color: var(--accent-teal); margin-bottom: 0.5rem;">Workflow</h4>
            <ol style="color: var(--text-secondary); font-size: 0.875rem; padding-left: 1rem;">
              <li style="margin-bottom: 0.25rem;">Clinic submits prior-auth request</li>
              <li style="margin-bottom: 0.25rem;">Insurance agent processes and responds</li>
              <li style="margin-bottom: 0.25rem;">Pharmacy receives approval notification</li>
              <li style="margin-bottom: 0.25rem;">All parties get status updates</li>
            </ol>
          </div>
          
          <div>
            <h4 style="color: var(--accent-teal); margin-bottom: 0.5rem;">Expected Outcome</h4>
            <p style="color: var(--text-secondary); font-size: 0.875rem;">
              Faster approvals, fewer denials, and complete audit trail for compliance.
            </p>
          </div>
        </div>
        
        <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--border);">
          <a href="./signup.html" class="btn-primary" style="width: 100%; text-align: center;">
            Build This Workflow
          </a>
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script>
      const templates = {
        healthcare: {
          title: "Healthcare: Patient Care Coordination",
          agents: 3,
          problem: "Prior authorization requests often get lost between clinic and insurance systems, causing treatment delays.",
          solution: "Agents coordinate the entire workflow with delivery guarantees and structured status updates.",
          workflow: [
            "Clinic submits prior-auth request",
            "Insurance agent processes and responds", 
            "Pharmacy receives approval notification",
            "All parties get status updates"
          ],
          outcome: "Faster approvals, fewer denials, and complete audit trail for compliance.",
          code: `# Healthcare: Prior Authorization Request
from brikk import Agent, Contract

clinic = Agent("clinic_system")
insurance = Agent("insurance_provider")

# Send structured prior-auth request
auth_request = clinic.send_message(
  to=insurance,
  type="prior_authorization",
  data={"procedure": "MRI", "patient_id": "12345"}
)`,
          scenario: [
            "Initializing healthcare workflow...",
            "Clinic Agent: Submitting prior-auth for MRI procedure",
            "Insurance Agent: Received request, processing...",
            "Insurance Agent: Approved - sending confirmation",
            "Pharmacy Agent: Received approval notification",
            "✓ Workflow completed in 2.3 seconds",
            "✓ All parties notified with delivery confirmation"
          ]
        },
        finance: {
          title: "Finance: Trading Workflows",
          agents: 4,
          problem: "Trade confirmations and settlements across venues are inconsistent and error-prone.",
          solution: "Agents handle pre-trade checks, confirmations, and automated settlements with audit trails.",
          workflow: [
            "Trading agent submits order",
            "Risk agent validates and approves",
            "Venue agent executes trade",
            "Settlement agent processes payment"
          ],
          outcome: "Reduced operational risk, faster settlement, and complete trade lifecycle tracking.",
          code: `# Finance: Automated Trading Workflow
from brikk import Agent, Contract

trader = Agent("trading_desk")
risk = Agent("risk_management")
venue = Agent("exchange")

# Pre-trade risk check
risk_check = trader.send_message(
  to=risk,
  type="risk_check",
  data={"symbol": "AAPL", "quantity": 1000}
)`,
          scenario: [
            "Initializing trading workflow...",
            "Trading Agent: Submitting order for 1000 AAPL shares",
            "Risk Agent: Running pre-trade checks...",
            "Risk Agent: Approved - within risk limits",
            "Venue Agent: Order executed at $150.25",
            "Settlement Agent: Processing $150,250 payment",
            "✓ Trade completed in 1.8 seconds",
            "✓ All confirmations sent with audit trail"
          ]
        },
        "supply-chain": {
          title: "Supply Chain: Procurement Automation",
          agents: 3,
          problem: "Purchase orders, shipments, and payments are disconnected across supplier systems.",
          solution: "Agents coordinate PO → ASN → Delivery → Payment with milestone-based releases.",
          workflow: [
            "Buyer creates purchase order",
            "Supplier confirms and ships",
            "Carrier provides delivery updates",
            "Payment released on confirmation"
          ],
          outcome: "Fewer chargebacks, faster supplier cycles, and automated dispute resolution.",
          code: `# Supply Chain: Purchase Order Workflow
from brikk import Agent, Contract

buyer = Agent("procurement_system")
supplier = Agent("supplier_portal")
carrier = Agent("logistics_provider")

# Create purchase order with terms
po = buyer.create_contract(
  with_party=supplier,
  type="purchase_order",
  terms={"amount": 50000, "delivery_date": "2025-02-15"}
)`,
          scenario: [
            "Initializing procurement workflow...",
            "Buyer Agent: Creating PO for $50,000 order",
            "Supplier Agent: Confirmed - preparing shipment",
            "Carrier Agent: Pickup scheduled for tomorrow",
            "Carrier Agent: Package in transit - ETA 3 days",
            "Buyer Agent: Delivery confirmed - releasing payment",
            "✓ Procurement cycle completed in 4.2 seconds",
            "✓ Payment of $50,000 processed automatically"
          ]
        },
        "customer-ops": {
          title: "Customer Ops: Service Tickets",
          agents: 3,
          problem: "Support tickets get stuck between systems without clear ownership or SLA tracking.",
          solution: "Agents coordinate triage, escalation, and resolution with automated refund processing.",
          workflow: [
            "Customer agent creates ticket",
            "Triage agent assigns to specialist",
            "Resolution agent fixes issue",
            "Billing agent processes refund if needed"
          ],
          outcome: "Shorter resolution times, consistent experiences, and automated compensation.",
          code: `# Customer Ops: Ticket Resolution
from brikk import Agent, Contract

support = Agent("customer_support")
billing = Agent("billing_system")
specialist = Agent("technical_team")

# Create ticket with SLA contract
ticket = support.create_contract(
  type="service_ticket",
  sla={"response_time": "2h", "resolution_time": "24h"}
)`,
          scenario: [
            "Initializing support workflow...",
            "Support Agent: New ticket #12345 created",
            "Triage Agent: Assigned to technical specialist",
            "Specialist Agent: Issue identified - billing error",
            "Specialist Agent: Resolution applied",
            "Billing Agent: Processing $25 refund",
            "✓ Ticket resolved in 18 minutes",
            "✓ Customer notified with refund confirmation"
          ]
        },
        energy: {
          title: "Energy: Smart Grid Management",
          agents: 4,
          problem: "Grid optimization requires real-time coordination between distributed assets and markets.",
          solution: "Agents balance load, bid into markets, and settle performance-based payments.",
          workflow: [
            "Grid agent detects demand spike",
            "Asset agents respond with capacity",
            "Market agent submits bids",
            "Settlement agent processes payments"
          ],
          outcome: "Better grid stability, optimized revenue, and automated performance tracking.",
          code: `# Energy: Demand Response Event
from brikk import Agent, Contract

grid = Agent("grid_operator")
solar = Agent("solar_farm")
battery = Agent("battery_storage")

# Trigger demand response event
event = grid.send_message(
  to=[solar, battery],
  type="demand_response",
  data={"target_reduction": "5MW", "duration": "2h"}
)`,
          scenario: [
            "Initializing grid management workflow...",
            "Grid Agent: Demand spike detected - need 5MW reduction",
            "Solar Agent: Available - can provide 3MW",
            "Battery Agent: Discharging - providing 2MW",
            "Market Agent: Submitting demand response bid",
            "Settlement Agent: Performance verified - paying $2,500",
            "✓ Grid balanced in 45 seconds",
            "✓ Performance payments processed automatically"
          ]
        },
        devops: {
          title: "DevOps: Platform Automation",
          agents: 4,
          problem: "Deployments and incidents require manual coordination across multiple teams and systems.",
          solution: "Agents coordinate deployments, change approvals, and incident response with cost allocation.",
          workflow: [
            "Dev agent requests deployment",
            "Approval agent validates changes",
            "Platform agent executes deployment",
            "Billing agent allocates costs"
          ],
          outcome: "Fewer failed deployments, faster incident resolution, and clear cost accountability.",
          code: `# DevOps: Deployment Pipeline
from brikk import Agent, Contract

dev = Agent("development_team")
platform = Agent("platform_ops")
approval = Agent("change_board")

# Request deployment with approval workflow
deployment = dev.create_contract(
  type="deployment_request",
  approvers=[approval],
  rollback_plan="automatic"
)`,
          scenario: [
            "Initializing deployment workflow...",
            "Dev Agent: Requesting deployment of v2.1.3",
            "Approval Agent: Change approved - low risk",
            "Platform Agent: Deploying to production...",
            "Platform Agent: Deployment successful - health checks passed",
            "Billing Agent: Allocating $45 deployment cost",
            "✓ Deployment completed in 3.2 minutes",
            "✓ Cost allocated to development team budget"
          ]
        }
      };

      let currentTemplate = 'healthcare';
      let isRunning = false;

      function loadTemplate(templateId) {
        currentTemplate = templateId;
        const template = templates[templateId];
        
        // Update active template
        document.querySelectorAll('.template-item').forEach(item => {
          item.classList.remove('active');
        });
        event.target.closest('.template-item').classList.add('active');
        
        // Update main content
        document.getElementById('scenario-title').textContent = template.title;
        document.getElementById('agents-count').textContent = template.agents;
        document.getElementById('messages-count').textContent = '0';
        document.getElementById('contracts-count').textContent = '0';
        document.getElementById('payments-count').textContent = '$0';
        
        // Update code example
        document.getElementById('code-example').innerHTML = template.code.split('\n').map(line => {
          if (line.startsWith('#')) {
            return `<div style="color: var(--accent-teal);">${line}</div>`;
          } else if (line.includes('from ') || line.includes('import ')) {
            return `<div style="color: var(--text-secondary);">${line}</div>`;
          } else {
            return `<div>${line}</div>`;
          }
        }).join('');
        
        // Update scenario details
        const workflowHtml = template.workflow.map((step, i) => 
          `<li style="margin-bottom: 0.25rem;">${step}</li>`
        ).join('');
        
        document.getElementById('scenario-details').innerHTML = `
          <div style="margin-bottom: 1.5rem;">
            <h4 style="color: var(--accent-teal); margin-bottom: 0.5rem;">Problem</h4>
            <p style="color: var(--text-secondary); font-size: 0.875rem;">${template.problem}</p>
          </div>
          
          <div style="margin-bottom: 1.5rem;">
            <h4 style="color: var(--accent-teal); margin-bottom: 0.5rem;">Solution</h4>
            <p style="color: var(--text-secondary); font-size: 0.875rem;">${template.solution}</p>
          </div>
          
          <div style="margin-bottom: 1.5rem;">
            <h4 style="color: var(--accent-teal); margin-bottom: 0.5rem;">Workflow</h4>
            <ol style="color: var(--text-secondary); font-size: 0.875rem; padding-left: 1rem;">
              ${workflowHtml}
            </ol>
          </div>
          
          <div>
            <h4 style="color: var(--accent-teal); margin-bottom: 0.5rem;">Expected Outcome</h4>
            <p style="color: var(--text-secondary); font-size: 0.875rem;">${template.outcome}</p>
          </div>
        `;
        
        // Reset console
        document.getElementById('console').innerHTML = `
          <div>Brikk Sandbox v1.2.0 - Ready</div>
          <div>Loading ${templateId} template...</div>
          <div>✓ Agents initialized</div>
          <div>Ready to run scenario. Click 'Run Scenario' to begin.</div>
        `;
      }

      function runScenario() {
        if (isRunning) return;
        
        isRunning = true;
        const template = templates[currentTemplate];
        const console = document.getElementById('console');
        
        // Clear console
        console.innerHTML = '<div>Starting scenario...</div>';
        
        // Simulate scenario execution
        let step = 0;
        const interval = setInterval(() => {
          if (step < template.scenario.length) {
            const line = document.createElement('div');
            line.textContent = template.scenario[step];
            console.appendChild(line);
            console.scrollTop = console.scrollHeight;
            
            // Update metrics
            if (step === 1) {
              document.getElementById('messages-count').textContent = '1';
            } else if (step === 2) {
              document.getElementById('messages-count').textContent = '2';
            } else if (step === 3) {
              document.getElementById('contracts-count').textContent = '1';
              document.getElementById('messages-count').textContent = '3';
            } else if (step === 4) {
              document.getElementById('messages-count').textContent = '4';
            } else if (step === 5) {
              document.getElementById('payments-count').textContent = currentTemplate === 'supply-chain' ? '$50,000' : 
                                                                      currentTemplate === 'energy' ? '$2,500' :
                                                                      currentTemplate === 'devops' ? '$45' :
                                                                      currentTemplate === 'customer-ops' ? '$25' : '$150,250';
            }
            
            step++;
          } else {
            clearInterval(interval);
            isRunning = false;
          }
        }, 800);
      }

      // Initialize with healthcare template
      loadTemplate('healthcare');
    </script>
  </body>
</html>

